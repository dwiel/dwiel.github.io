<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title> Axpress  | Zach Dwiel</title>
  <meta name="author" content="Zach Dwiel">
  
  <meta name="description" content="Query languages of the past have been good at locating data in existing databases.  I wanted to see what it might look like to have a query language f">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content=" Axpress "/>
  <meta property="og:site_name" content="Zach Dwiel"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Zach Dwiel" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Zach Dwiel</a></h1>
  <h2><a href="/"></a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-10-03T04:03:30.147Z"><a href="/2015/10/03/axpress/">2015-10-03</a></time>
      
      
  
    <h1 class="title"> Axpress </h1>
  

    </header>
    <div class="entry">
      
        <p>Query languages of the past have been good at locating data in existing databases.  I wanted to see what it might look like to have a query language for not just local information but all available information and information yet to be generated.  Here is what it looks like right now:</p>
<p><em>Examples</em></p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">image</span>[<span class="keyword">file</span>.pattern] = <span class="string">"/home/dwiel/pictures/*.jpg"</span></span><br><span class="line"><span class="keyword">image</span>[<span class="keyword">file</span>.filename] = _filename</span><br></pre></td></tr></table></figure>
<p>This query returns a list of filenames of jpg images in my pictures directory:</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"></span><br><span class="line">[</span><br><span class="line">    </span><span class="expression">&#123;</span><br><span class="line">        '<span class="variable">filename</span>' : '<span class="end-block">/home</span><span class="end-block">/dwiel</span><span class="end-block">/pictures</span><span class="end-block">/sunset.jpg</span>'</span><br><span class="line">    &#125;</span><span class="xml">, </span><span class="expression">&#123;</span><br><span class="line">        '<span class="variable">filename</span>' : '<span class="end-block">/home</span><span class="end-block">/dwiel</span><span class="end-block">/pictures</span><span class="end-block">/funny.jpg</span>'</span><br><span class="line">    &#125;</span><span class="xml"></span><br><span class="line">]</span></span><br></pre></td></tr></table></figure>
<p>And another query:</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">image</span>[<span class="keyword">file</span>.pattern] = <span class="string">"/home/dwiel/pictures/*.jpg"</span></span><br><span class="line"><span class="keyword">image</span>[<span class="keyword">image</span>.average_color] = _color</span><br></pre></td></tr></table></figure>
<p>which this time just returns colors:</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="list">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="variable">'color</span>' : <span class="list">(<span class="keyword">244</span>, <span class="number">100</span>, <span class="number">133</span>)</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="variable">'color</span>' : <span class="list">(<span class="keyword">24</span>, <span class="number">15</span>, <span class="number">12</span>)</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span></span><br></pre></td></tr></table></figure>
<p>If we want both the filename and the color, we can request both</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">image</span>[<span class="keyword">file</span>.pattern] = <span class="string">"/home/dwiel/pictures/*.jpg"</span></span><br><span class="line"><span class="keyword">image</span>[<span class="keyword">file</span>.filename] = _filename</span><br><span class="line"><span class="keyword">image</span>[<span class="keyword">image</span>.average_color] = _color</span><br></pre></td></tr></table></figure>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="list">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="variable">'filename</span>' : <span class="variable">'/home/dwiel/pictures/sunset.jpg</span>',</span><br><span class="line">        <span class="variable">'color</span>' : <span class="list">(<span class="keyword">244</span>, <span class="number">100</span>, <span class="number">133</span>)</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="variable">'filename</span>' : <span class="variable">'/home/dwiel/pictures/funny.jpg</span>'</span><br><span class="line">        <span class="variable">'color</span>' : <span class="list">(<span class="keyword">24</span>, <span class="number">15</span>, <span class="number">12</span>)</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span></span><br></pre></td></tr></table></figure>
<p>If we want to query for images on flickr it looks very similar (sorry about the lack of square brackets around flickr … wordpress tries to turn it into a flickr video) :</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">image</span> flickr = <span class="string">"sunset"</span></span><br><span class="line"><span class="keyword">image</span>[<span class="keyword">image</span>.average_color] = _color</span><br></pre></td></tr></table></figure>
<p>Which atm, is (#2 is black and white):</p>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="collection">[</span><br><span class="line">  <span class="collection">&#123;</span><br><span class="line">    'color' : <span class="collection">[ <span class="number">184</span>, <span class="number">139</span>, <span class="number">92</span>, ]</span>,</span><br><span class="line">  &#125;</span>, <span class="collection">&#123;</span><br><span class="line">    'color' : <span class="number">11</span>,</span><br><span class="line">  &#125;</span>, <span class="collection">&#123;</span><br><span class="line">    'color' : <span class="collection">[ <span class="number">153</span>, <span class="number">117</span>, <span class="number">87</span>, ]</span>,</span><br><span class="line">  &#125;</span>, <span class="collection">&#123;</span><br><span class="line">    'color' : <span class="collection">[ <span class="number">134</span>, <span class="number">138</span>, <span class="number">161</span>, ]</span>,</span><br><span class="line">  &#125;</span>, <span class="collection">&#123;</span><br><span class="line">    'color' : <span class="collection">[ <span class="number">121</span>, <span class="number">119</span>, <span class="number">119</span>, ]</span>,</span><br><span class="line">  &#125;</span>,</span><br><span class="line">]</span></span><br></pre></td></tr></table></figure>
<p>Again, if we want a filename for these we can add that like we did before and the pictures will be downloaded to a temporary file as a side-effect so that there will be a filename to provide.  Or we could just ask for a url.</p>
<p>For a more complex example, we’ll query for all of the artists similar to the artist that the last.fm user dwiel has most recently listened to:</p>
<figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="atom">user</span>[<span class="atom">lastfm</span>.<span class="atom">user_name</span>] = <span class="string">'dwiel'</span></span><br><span class="line"><span class="atom">user</span>[<span class="atom">lastfm</span>.<span class="atom">recent_track</span>] = <span class="atom">track</span></span><br><span class="line"><span class="atom">track</span>[<span class="atom">lastfm</span>.<span class="atom">artist</span>] = <span class="atom">artist</span></span><br><span class="line"><span class="atom">artist</span>[<span class="atom">lastfm</span>.<span class="atom">similar_to</span>] = <span class="atom">similar_artist</span></span><br><span class="line"><span class="atom">similar_artist</span>[<span class="atom">lastfm</span>.<span class="atom">artist_name</span>] = <span class="name">_similar_name</span></span><br></pre></td></tr></table></figure>
<p>or if you prefer, a more concise format:</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">user[lastfm.user_name] = 'dwiel'</span><br><span class="line">user[<span class="link_label">lastfm.recent_track</span>][<span class="link_reference">lastfm.artist</span>][<span class="link_label">lastfm.similar_to</span>][<span class="link_reference">lastfm.artist_name</span>] = <span class="emphasis">_similar_</span>name</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">u'similar_name'</span> : <span class="string">u'Scout Niblett'</span>,</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    <span class="string">u'similar_name'</span> : <span class="string">u'Blonde Redhead'</span>,</span><br><span class="line">  &#125;, ... &#123;</span><br><span class="line">    <span class="string">u'similar_name'</span> : <span class="string">u'The Fiery Furnaces'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p><em>Overall</em></p>
<p>As I explored this query language, one of the most interesting aspects was the ability to easily query for information which would otherwise require lots of glue code in other languages.  If there is a translation from one data type to another, then you don’t need to code that translation explicitly.  If you have an image URL or flickr tag, you can immediately start talking about it’s average color.  This is very powerful, and I am still working out what kinds of new user interface designs that this may make possible.</p>
<p>One user interface design that I have been exploring would use this as an intermediate query language which some form of natural language could be compiled into.  I am excited to explore where this goes when mixed with ideas from one of my previous projects <a href="http://dwiel.net/english" target="_blank" rel="external">english</a> and some new ideas coming out of mozilla labs with <a href="http://labs.mozilla.com/projects/ubiquity/" target="_blank" rel="external">ubiquity</a>.</p>
<p>Code is available <a href="http://code.google.com/p/simplesparql/" target="_blank" rel="external">here</a>.  Though note that you must check out the latest svn as the version available under the download section is a very old version of the code.  Back when it was merely a MQL style query language for accessing SPARQL endpoints.  Although, if that is what you want, then the front page and the download files are applicable.</p>
<p>I have a simple web interface running locally, but I am not yet ready to let other people run arbitrary code on my machine (even in a sandbox).  Hopefully soon.</p>

      
    </div>
    <footer>
      
        
        
        
  <div class="addthis addthis_toolbox addthis_default_style">
    
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    
    
      <a class="addthis_button_tweet"></a>
    
    
      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    
    
      <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
    
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js"></script>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">Comments</h1>

  
      <div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=123456789012345";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

<div class="fb-comments" data-href="http://dwiel.github.io/2015/10/03/axpress/index.html" data-num-posts="5" data-width="840" data-colorscheme="light"></div>
      
  
</section>

</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:dwiel.github.io">
  </form>
</div>

  

  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/Axpress/">Axpress</a><small>2</small></li>
  
    <li><a href="/tags/Bug-Fix/">Bug Fix</a><small>4</small></li>
  
    <li><a href="/tags/CEB-Press/">CEB Press</a><small>6</small></li>
  
    <li><a href="/tags/Code/">Code</a><small>16</small></li>
  
    <li><a href="/tags/Data-Exploration/">Data Exploration</a><small>1</small></li>
  
    <li><a href="/tags/FYI/">FYI</a><small>9</small></li>
  
    <li><a href="/tags/Family/">Family</a><small>1</small></li>
  
    <li><a href="/tags/Food/">Food</a><small>2</small></li>
  
    <li><a href="/tags/Foundation/">Foundation</a><small>3</small></li>
  
    <li><a href="/tags/How-to/">How to</a><small>6</small></li>
  
    <li><a href="/tags/Linux/">Linux</a><small>11</small></li>
  
    <li><a href="/tags/Music/">Music</a><small>2</small></li>
  
    <li><a href="/tags/Our-House/">Our House</a><small>12</small></li>
  
    <li><a href="/tags/Politics/">Politics</a><small>4</small></li>
  
    <li><a href="/tags/Reflection/">Reflection</a><small>2</small></li>
  
    <li><a href="/tags/Script/">Script</a><small>2</small></li>
  
    <li><a href="/tags/Uncategorized/">Uncategorized</a><small>7</small></li>
  
    <li><a href="/tags/Welcome/">Welcome</a><small>1</small></li>
  
    <li><a href="/tags/Windows/">Windows</a><small>3</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2015 Zach Dwiel
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>